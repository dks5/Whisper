<!doctype html>
<html lang="ru" class="scroll-smooth">

<head>
    <meta charset="utf-8">
    <title>–ì–æ—Ä—è—á–∞—è –¥–∏–∫—Ç–æ–≤–∫–∞ —Å Whisper: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ó–∞–ø—É—Å–∫</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* –ù–∞—á–∞–ª–æ –±–ª–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö CSS-—Å—Ç–∏–ª–µ–π */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');
        :root {
          --bg-primary: #0a0a0a;
          --bg-secondary: #111111;
          --bg-card: #1a1a1a;
          --bg-hover: #252525;
          --text-primary: #e5e5e5;
          --text-secondary: #a3a3a3;
          --text-muted: #737373;
          --accent: #3b82f6;
          --accent-hover: #2563eb;
          --accent-glow: rgba(59, 130, 246, 0.5);
          --success: #10b981;
          --warn: #ffc107;
          --err: #f85149;
          --border: #262626;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–æ—Å—ã –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */
        * {
          scrollbar-width: thin;
          scrollbar-color: #404040 #1a1a1a;
        }
        *::-webkit-scrollbar {
          width: 8px;
          height: 8px;
        }
        *::-webkit-scrollbar-track {
          background: #1a1a1a;
        }
        *::-webkit-scrollbar-thumb {
          background-color: #404040;
          border-radius: 4px;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–µ–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ —à—Ä–∏—Ñ—Ç–æ–≤ */
        body {
          font-family: 'Inter', sans-serif;
          background-color: var(--bg-primary);
          color: var(--text-primary);
          background-image:
            radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
        }
        code, pre {
          font-family: 'JetBrains Mono', monospace;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        .nav-btn {
          position: relative;
          overflow: hidden;
          transition: all 300ms ease;
          background: rgba(255, 255, 255, 0.05);
          backdrop-filter: blur(10px);
          border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .nav-btn:hover {
          background: rgba(255, 255, 255, 0.1);
          transform: translateY(-2px);
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        .nav-btn.active {
          background: var(--accent);
          color: white;
          border-color: var(--accent);
          box-shadow: 0 0 20px var(--accent-glow);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .card {
          background: var(--bg-card);
          border: 1px solid var(--border);
          border-radius: 12px;
          padding: 1.5rem;
          transition: all 300ms ease;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
        }
        .card:hover {
          background: var(--bg-hover);
          border-color: var(--accent);
          box-shadow: 0 0 30px rgba(59, 130, 246, 0.1);
          transform: translateY(-2px);
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ */
        .code-block {
          position: relative;
          background: #0d1117;
          border: 1px solid #30363d;
          border-radius: 8px;
          overflow: hidden;
          margin: 1rem 0;
        }
        .code-block pre {
          margin: 0;
          padding: 1rem;
          overflow-x: auto;
          color: #e6edf3;
          white-space: pre-wrap;
          word-wrap: break-word;
        }
        .code-block code {
          font-size: 0.875rem;
          line-height: 1.6;
        }
        /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ */
        .code-block .comment { color: #8b949e; }
        .code-block .keyword { color: #ff7b72; }
        .code-block .string { color: #a5d6ff; }
        .code-block .function { color: #d2a8ff; }

        /* –ö–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è */
        .copy-btn {
          position: absolute;
          top: 0.5rem;
          right: 0.5rem;
          background: rgba(255, 255, 255, 0.1);
          color: var(--text-secondary);
          padding: 0.25rem 0.75rem;
          border-radius: 6px;
          font-size: 0.75rem;
          transition: all 200ms ease;
          backdrop-filter: blur(10px);
          border: 1px solid rgba(255, 255, 255, 0.1);
          cursor: pointer;
        }
        .copy-btn:hover {
          background: rgba(255, 255, 255, 0.2);
          color: var(--text-primary);
          transform: translateY(-1px);
        }
        .copy-btn.copied {
          background: var(--success);
          color: white;
          border-color: var(--success);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeInUp {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
          animation: fadeInUp 0.6s ease forwards;
          opacity: 0;
        }
        
        /* –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç */
        .gradient-text {
          background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }
        
        /* –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è */
        .hero-glow::before {
          content: '';
          position: absolute;
          top: -50%;
          left: -50%;
          width: 200%;
          height: 200%;
          background: radial-gradient(circle, var(--accent-glow) 0%, transparent 70%);
          opacity: 0.3;
          z-index: -1;
          filter: blur(60px);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü */
        table { width: 100%; border-collapse: collapse; margin: 16px 0; font-size: 0.97rem; }
        th, td { border: 1px solid var(--border); padding: 10px 12px; vertical-align: top; }
        th { background: #1a1a1a; text-align: left; }
        td:first-child { font-weight: 500; color: var(--text-secondary); }
        
    </style>
</head>

<body>
    <!-- –ù–ê–ß–ê–õ–û: –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="sticky top-0 z-50 backdrop-blur-md bg-black/50 border-b border-white/10">
        <header class="max-w-6xl mx-auto px-4 py-4 md:py-6">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <a href="#" class="text-2xl md:text-3xl font-bold">
                    <span class="gradient-text">Whisper Hotkey</span>
                </a>
                <nav id="desktop-nav-links" class="flex gap-2 md:gap-3">
                    <a href="#setup" data-target="setup" class="nav-link nav-btn px-4 py-2 rounded-full text-sm font-medium">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞</a>
                    <a href="#script" data-target="script" class="nav-link nav-btn px-4 py-2 rounded-full text-sm font-medium">–ù–∞—Å—Ç—Ä–æ–π–∫–∞</a>
                    <a href="#launch" data-target="launch" class="nav-link nav-btn px-4 py-2 rounded-full text-sm font-medium">–ó–∞–ø—É—Å–∫</a>
                </nav>
            </div>
        </header>
    </div>
    <!-- –ö–û–ù–ï–¶: –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
    
    <!-- –ù–ê–ß–ê–õ–û: –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="max-w-6xl mx-auto px-4 py-12">
        
        <!-- Hero —Å–µ–∫—Ü–∏—è (–û–±—â–∞—è –¥–ª—è –≤—Å–µ—Ö) -->
        <section class="text-center mb-16 relative hero-glow">
            <h1 class="text-4xl md:text-6xl font-bold mb-6 fade-in">
                –ì–æ—Ä—è—á–∞—è –¥–∏–∫—Ç–æ–≤–∫–∞ —Å <span class="gradient-text">Whisper</span>
            </h1>
            <p class="text-xl text-gray-400 fade-in">
                –í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ —Ä–µ—á–∏ –ø–æ –≥–æ—Ä—è—á–µ–π –∫–ª–∞–≤–∏—à–µ
            </p>
            <div class="mt-8 fade-in">
                <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    <span class="text-sm text-gray-400">–ì–æ—Ç–æ–≤ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ</span>
                </div>
            </div>
        </section>
        
        <section id="setup" class="page-section mb-16">
            <h2 class="text-3xl font-bold mb-6">üöÄ –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞</h2>
            <div class="card fade-in">
                <h3 class="text-xl font-semibold mb-3">–ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –ü–û</h3>
                <table>
                    <tbody>
                        <tr>
                            <td><b>Python ‚â• 3.10 (x64)</b></td>
                            <td>–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞. <b>–í–∞–∂–Ω–æ:</b> –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É ‚ÄúAdd Python to PATH‚Äù.</td>
                            <td><a href="https://www.python.org/downloads/" target="_blank" rel="noopener" class="text-blue-400 hover:underline">python.org</a></td>
                        </tr>
                        <tr>
                            <td>NVIDIA –¥—Ä–∞–π–≤–µ—Ä + CUDA (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</td>
                            <td>–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è GPU, —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –±—É–¥–µ—Ç –≤ —Ä–∞–∑—ã –±—ã—Å—Ç—Ä–µ–µ.</td>
                            <td><a href="https://developer.nvidia.com/cuda-downloads/" target="_blank" rel="noopener" class="text-blue-400 hover:underline">cuda-downloads</a></td>
                        </tr>
                    </tbody>
                </table>
                <h3 class="text-xl font-semibold mt-8 mb-3">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</h3>
                <p class="text-gray-400 mb-4">–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–æ—Ç –±–ª–æ–∫ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ PowerShell. –û–Ω —Å–æ–∑–¥–∞—Å—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.</p>
                <div class="code-block">
                    <pre><code><span class="comment"># --- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ ---</span>
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
$dir_path = 'C:\whisper_hotkey'; if (-not (Test-Path $dir_path)) { mkdir $dir_path }; Set-Location $dir_path
if (-not (Test-Path '.\venv')) { python -m venv venv }
.\venv\Scripts\Activate.ps1
pip install --upgrade pip
$use_gpu = if (Get-Command nvidia-smi -ErrorAction SilentlyContinue) { $true } else { $false }
if ($use_gpu) {
    Write-Host "–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ NVIDIA GPU. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PyTorch —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CUDA..." -ForegroundColor Green
    pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
} else {
    Write-Host "NVIDIA GPU –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ CPU-–≤–µ—Ä—Å–∏–∏ PyTorch..." -ForegroundColor Yellow
    pip install torch torchvision torchaudio
}
pip install openai-whisper sounddevice keyboard pyperclip
Write-Host "`n_ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!" -ForegroundColor Cyan</code></pre>
                    <button class="copy-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
            </div>
        </section>
        
        <section id="script" class="page-section mb-16" style="display: none;">
            <h2 class="text-3xl font-bold mb-6">‚öôÔ∏è –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞</h2>
            <p class="text-gray-400 mb-6">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É –ø–∞–Ω–µ–ª—å, —á—Ç–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –ø–æ–¥ —Å–µ–±—è. –ò–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤—è—Ç –∫–æ–¥ Python –Ω–∏–∂–µ. –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, <b>—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ</b> –≤ —Ñ–∞–π–ª <code>C:\whisper_hotkey\hotkey_whisper.py</code>.</p>
        
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4" id="cfg">
                <div class="card"><label for="HOTKEY_KEY" class="block text-sm font-medium text-gray-300 mb-2">–ö–ª–∞–≤–∏—à–∞ –∑–∞–ø–∏—Å–∏</label><input type="text" id="HOTKEY_KEY" class="w-full bg-gray-900 border border-gray-700 rounded-md p-2 text-sm"></div>
                <div class="card"><label for="WHISPER_MODEL" class="block text-sm font-medium text-gray-300 mb-2">–ú–æ–¥–µ–ª—å Whisper</label><select id="WHISPER_MODEL" class="w-full bg-gray-900 border border-gray-700 rounded-md p-2 text-sm"><option value="tiny">tiny</option><option value="base">base</option><option value="small">small</option><option value="medium">medium</option><option value="large-v2">large-v2</option><option value="large-v3">large-v3</option></select></div>
                <div class="card"><label for="LANGUAGE" class="block text-sm font-medium text-gray-300 mb-2">–Ø–∑—ã–∫</label><select id="LANGUAGE" class="w-full bg-gray-900 border border-gray-700 rounded-md p-2 text-sm"><option value="ru">–†—É—Å—Å–∫–∏–π</option><option value="">–ê–≤—Ç–æ</option><option value="en">English</option></select></div>
                <div class="card"><label for="TASK" class="block text-sm font-medium text-gray-300 mb-2">–ó–∞–¥–∞—á–∞</label><select id="TASK" class="w-full bg-gray-900 border border-gray-700 rounded-md p-2 text-sm"><option value="transcribe">–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ</option><option value="translate">–ü–µ—Ä–µ–≤–æ–¥</option></select></div>
                <div class="card"><label for="MAX_RECORD_SEC" class="block text-sm font-medium text-gray-300 mb-2">–ú–∞–∫—Å. –∑–∞–ø–∏—Å—å, —Å–µ–∫</label><input type="number" id="MAX_RECORD_SEC" min="5" max="600" step="1" class="w-full bg-gray-900 border border-gray-700 rounded-md p-2 text-sm"></div>
                
                <div class="card"><label for="SILENCE_THRESHOLD" class="block text-sm font-medium text-gray-300 mb-2">–ü–æ—Ä–æ–≥ —Ç–∏—à–∏–Ω—ã</label><input type="number" id="SILENCE_THRESHOLD" min="0" max="1" step="0.005" class="w-full bg-gray-900 border border-gray-700 rounded-md p-2 text-sm"></div>
                <div class="card"><label for="SILENCE_MARGIN_SEC" class="block text-sm font-medium text-gray-300 mb-2">–ó–∞–ø–∞—Å —Ç–∏—à–∏–Ω—ã, —Å–µ–∫</label><input type="number" id="SILENCE_MARGIN_SEC" min="0" max="1" step="0.05" class="w-full bg-gray-900 border border-gray-700 rounded-md p-2 text-sm"></div>
                <div class="card"><label for="CHUNK_SEC" class="block text-sm font-medium text-gray-300 mb-2">–†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞, —Å–µ–∫</label><input type="number" id="CHUNK_SEC" min="0.1" max="1.0" step="0.05" class="w-full bg-gray-900 border border-gray-700 rounded-md p-2 text-sm"></div>
                <div class="card"><label for="INPUT_DEVICE" class="block text-sm font-medium text-gray-300 mb-2">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–≤–æ–¥–∞</label><input type="text" id="INPUT_DEVICE" placeholder="–ø—É—Å—Ç–æ = –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é" class="w-full bg-gray-900 border border-gray-700 rounded-md p-2 text-sm"></div>
                
                <div class="card items-center"><div class="flex items-center justify-between w-full"><label for="SUPPRESS_HOTKEY" class="text-sm text-gray-300">–ü–æ–¥–∞–≤–ª—è—Ç—å –∫–ª–∞–≤–∏—à—É</label><input type="checkbox" id="SUPPRESS_HOTKEY" class="h-5 w-5 rounded border-gray-600 bg-gray-800 text-blue-600 focus:ring-blue-500"></div></div>
                <div class="card items-center"><div class="flex items-center justify-between w-full"><label for="USE_GPU" class="text-sm text-gray-300">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GPU</label><input type="checkbox" id="USE_GPU" class="h-5 w-5 rounded border-gray-600 bg-gray-800 text-blue-600 focus:ring-blue-500"></div></div>
                <div class="card items-center"><div class="flex items-center justify-between w-full"><label for="SILENCE_TRIM" class="text-sm text-gray-300">–û–±—Ä–µ–∑–∞—Ç—å —Ç–∏—à–∏–Ω—É</label><input type="checkbox" id="SILENCE_TRIM" class="h-5 w-5 rounded border-gray-600 bg-gray-800 text-blue-600 focus:ring-blue-500"></div></div>
                
                <div class="card lg:col-start-5"><button class="w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-md text-sm transition h-full" onclick="resetDefaults()">–°–±—Ä–æ—Å–∏—Ç—å</button></div>
            </div>

            <!-- –ò–ó–ú–ï–ù–ï–ù–ò–ï: –î–æ–±–∞–≤–ª–µ–Ω –±–ª–æ–∫ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
            <div class="card mt-6">
                <h3 class="text-xl font-semibold mb-3">üìñ –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫</h3>
                <div class="overflow-x-auto">
                    <table>
                        <thead>
                            <tr>
                                <th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th>
                                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>–ö–ª–∞–≤–∏—à–∞ –∑–∞–ø–∏—Å–∏</td>
                                <td>–ö–ª–∞–≤–∏—à–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å –¥–ª—è –∑–∞–ø–∏—Å–∏ –≥–æ–ª–æ—Å–∞. –ù–∞–ø—Ä–∏–º–µ—Ä: <code>f9</code>, <code>ctrl+shift+a</code>.</td>
                            </tr>
                            <tr>
                                <td>–ú–æ–¥–µ–ª—å Whisper</td>
                                <td>–í–µ—Ä—Å–∏—è –º–æ–¥–µ–ª–∏ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è. <code>tiny</code> - —Å–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è, –Ω–æ –º–µ–Ω–µ–µ —Ç–æ—á–Ω–∞—è. <code>large-v3</code> - —Å–∞–º–∞—è —Ç–æ—á–Ω–∞—è, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤.</td>
                            </tr>
                            <tr>
                                <td>–Ø–∑—ã–∫</td>
                                <td>–Ø–∑—ã–∫, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤—ã –≥–æ–≤–æ—Ä–∏—Ç–µ. –í—ã–±–æ—Ä "–ê–≤—Ç–æ" –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å, –Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –ª—é–±–æ–π —è–∑—ã–∫.</td>
                            </tr>
                            <tr>
                                <td>–ó–∞–¥–∞—á–∞</td>
                                <td>–ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å —Ä–µ—á—å—é: "–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ" (—Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è) –∏–ª–∏ "–ü–µ—Ä–µ–≤–æ–¥" (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫).</td>
                            </tr>
                             <tr>
                                <td>–ú–∞–∫—Å. –∑–∞–ø–∏—Å—å, —Å–µ–∫</td>
                                <td>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö. –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –¥–æ–ª–≥–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è.</td>
                            </tr>
                            <tr>
                                <td>–ü–æ—Ä–æ–≥ —Ç–∏—à–∏–Ω—ã</td>
                                <td>–£—Ä–æ–≤–µ–Ω—å –≥—Ä–æ–º–∫–æ—Å—Ç–∏, –Ω–∏–∂–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–≤—É–∫ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ç–∏—à–∏–Ω–æ–π. –ü–æ–º–æ–≥–∞–µ—Ç –æ—Ç—Å–µ–∫–∞—Ç—å —Ñ–æ–Ω–æ–≤—ã–π —à—É–º.</td>
                            </tr>
                            <tr>
                                <td>–ó–∞–ø–∞—Å —Ç–∏—à–∏–Ω—ã, —Å–µ–∫</td>
                                <td>–°–∫–æ–ª—å–∫–æ —Ç–∏—à–∏–Ω—ã –æ—Å—Ç–∞–≤–ª—è—Ç—å –≤ –Ω–∞—á–∞–ª–µ –∏ –∫–æ–Ω—Ü–µ –∑–∞–ø–∏—Å–∏. –ü–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –æ–±—Ä–µ–∑–∞–Ω–∏—è —Å–ª–æ–≤.</td>
                            </tr>
                            <tr>
                                <td>–†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞, —Å–µ–∫</td>
                                <td>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä. –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞—É–¥–∏–æ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑. –ú–µ–Ω—è—Ç—å –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è.</td>
                            </tr>
                            <tr>
                                <td>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–≤–æ–¥–∞</td>
                                <td>ID –∏–ª–∏ —á–∞—Å—Ç—å –∏–º–µ–Ω–∏ –≤–∞—à–µ–≥–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞. –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.</td>
                            </tr>
                            <tr>
                                <td>–ü–æ–¥–∞–≤–ª—è—Ç—å –∫–ª–∞–≤–∏—à—É</td>
                                <td>–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, –Ω–∞–∂–∞—Ç–∏–µ –≥–æ—Ä—è—á–µ–π –∫–ª–∞–≤–∏—à–∏ –Ω–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –¥—Ä—É–≥–∏–º –ø—Ä–æ–≥—Ä–∞–º–º–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –Ω–∞–ø–µ—á–∞—Ç–∞–µ—Ç—Å—è –±—É–∫–≤–∞).</td>
                            </tr>
                            <tr>
                                <td>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GPU</td>
                                <td>–í–∫–ª—é—á–∏—Ç–µ, –µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ NVIDIA —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏ CUDA. –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ.</td>
                            </tr>
                            <tr>
                                <td>–û–±—Ä–µ–∑–∞—Ç—å —Ç–∏—à–∏–Ω—É</td>
                                <td>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç —Ç–∏—à–∏–Ω—É –∏–∑ –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ –≤–∞—à–µ–π –∑–∞–ø–∏—Å–∏ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="code-block mt-6">
                <pre><code id="pycode"></code></pre>
                <button class="copy-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
        </section>
        
        <section id="launch" class="page-section mb-16" style="display: none;">
            <h2 class="text-3xl font-bold mb-6">‚ñ∂Ô∏è –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</h2>
            <div class="card fade-in">
                <h3 class="text-xl font-semibold mb-3">–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏)</h3>
                <p class="text-gray-400 mb-4">–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–∞–ø—É—Å—Ç–∏–≤ —Å–∫—Ä–∏–ø—Ç –≤—Ä—É—á–Ω—É—é –≤ PowerShell.</p>
                <div class="code-block">
                    <pre><code><span class="comment"># 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–±–æ—á—É—é –ø–∞–ø–∫—É</span>
cd C:\whisper_hotkey
<span class="comment"># 2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ</span>
.\venv\Scripts\Activate.ps1
<span class="comment"># 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç</span>
python hotkey_whisper.py</code></pre>
                    <button class="copy-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</h3>
                <p class="text-gray-400 mb-4">–°–æ–∑–¥–∞–π—Ç–µ —è—Ä–ª—ã–∫ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –¥–∏–∫—Ç–æ–≤–∫–∏ –≤ –æ–¥–∏–Ω –∫–ª–∏–∫ –±–µ–∑ –≤–∏–¥–∏–º–æ–≥–æ –æ–∫–Ω–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.</p>
                <p class="text-gray-300 mb-2 font-semibold">1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª: <code>run.ps1</code></p>
                <p class="text-gray-400 mb-4">–í –ø–∞–ø–∫–µ <code>C:\whisper_hotkey</code> —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª <code>run.ps1</code> —Å —ç—Ç–∏–º –∫–æ–¥–æ–º:</p>
                <div class="code-block">
                    <pre><code># –°–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ Whisper Hotkey
$ErrorActionPreference = "Stop" # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ
$script_dir = "C:\whisper_hotkey"
$venv_path = Join-Path $script_dir "venv\Scripts\Activate.ps1"
$python_script_path = Join-Path $script_dir "hotkey_whisper.py"

try {
    if (-not (Test-Path $script_dir)) { throw "–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞ '$script_dir' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!" }
    Set-Location $script_dir
    Write-Host "–ü–µ—Ä–µ—Ö–æ–¥ –≤ $script_dir" -ForegroundColor Green

    if (-not (Test-Path $venv_path)) { throw "–°–∫—Ä–∏–ø—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω –ø–æ –ø—É—Ç–∏: $venv_path" }
    . $venv_path
    Write-Host "–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ." -ForegroundColor Green

    # üÜï –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ pip –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –µ—ë —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.
    Write-Host "–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è pip." -ForegroundColor Yellow
    Write-Host "–ù–∞–∂–º–∏—Ç–µ Y –∏–ª–∏ –î –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –ª–∏–±–æ –¥–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞." -ForegroundColor DarkGray

    # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
    $timeout = New-Timespan -Seconds 10
    $sw = [Diagnostics.Stopwatch]::StartNew()
    while ($sw.Elapsed -le $timeout) {
        Clear-Host
        Write-Host "–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è pip." -ForegroundColor Yellow
        Write-Host "–ù–∞–∂–º–∏—Ç–µ Y –∏–ª–∏ –î –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –ª–∏–±–æ –¥–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞." -ForegroundColor DarkGray
        
        # –û–∫—Ä—É–≥–ª—è–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Å–µ–∫—É–Ω–¥—ã –¥–æ –æ–¥–Ω–æ–≥–æ –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
        $remainingTime = [Math]::Round(($timeout.TotalSeconds - $sw.Elapsed.TotalSeconds), 1)
        Write-Host "–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è: $remainingTime —Å–µ–∫—É–Ω–¥" -ForegroundColor Magenta
        
        if ([Console]::KeyAvailable) {
            $key = [Console]::ReadKey($true)
            switch ($key.KeyChar.ToUpper()) {
                'Y' {'Y'}
                'D' {'Y'}
                default {}
            }
            break
        }
        Start-Sleep -Milliseconds 500
    }

    if ($key.KeyChar -eq 'Y' -or $key.KeyChar -eq 'D') {
        Write-Host "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ pip..." -ForegroundColor Green
        python -m pip install --upgrade pip
    } else {
        Write-Host "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ pip –ø—Ä–æ–ø—É—â–µ–Ω–æ." -ForegroundColor Red
    }

    if (-not (Test-Path $python_script_path)) { throw "–û—Å–Ω–æ–≤–Ω–æ–π Python-—Å–∫—Ä–∏–ø—Ç '$python_script_path' –Ω–µ –Ω–∞–π–¥–µ–Ω! –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É 2 –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ." }
    Write-Host "–ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –¥–∏–∫—Ç–æ–≤–∫–∏ Whisper... –ù–∞–∂–º–∏—Ç–µ Ctrl+C –≤ —ç—Ç–æ–º –æ–∫–Ω–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å." -ForegroundColor Cyan
    python $python_script_path
} catch {
    Write-Host "`n[–û–®–ò–ë–ö–ê –ó–ê–ü–£–°–ö–ê]" -ForegroundColor Red
    Write-Host $_.Exception.Message -ForegroundColor Red
    Write-Host "`n–°–∫—Ä–∏–ø—Ç –Ω–µ —Å–º–æ–≥ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞ –º–µ—Å—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ."
    Read-Host "–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –≤—ã—Ö–æ–¥–∞..."
}
</code></pre>
                    <button class="copy-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>

                <p class="text-gray-300 mt-6 mb-2 font-semibold">2. –°–æ–∑–¥–∞–π—Ç–µ —è—Ä–ª—ã–∫ –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ</p>
                <p class="text-gray-400 mb-4">–ü–ö–ú –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ ‚Üí –°–æ–∑–¥–∞—Ç—å ‚Üí –Ø—Ä–ª—ã–∫. –í –ø–æ–ª–µ "–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞" –≤—Å—Ç–∞–≤—å—Ç–µ:</p>
                <div class="code-block">
                    <pre><code>powershell.exe -ExecutionPolicy Bypass -WindowStyle Hidden -File "C:\whisper_hotkey\run.ps1"</code></pre>
                    <button class="copy-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
                 <p class="text-gray-300 mt-6 mb-2 font-semibold">3. –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—Ç–∞—é—â—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É ‚Äî —ç—Ç–æ –Ω–∞–π—Ç–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å –≤ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–µ –∑–∞–¥–∞—á –∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –µ–≥–æ:</p>
                <p class="text-gray-400 mb-4">–ù–∞–∂–º–∏—Ç–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –∫–ª–∞–≤–∏—à Ctrl + Shift + Esc, —á—Ç–æ–±—ã –≤—ã–∑–≤–∞—Ç—å –¥–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞–¥–∞—á.
–ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å powershell.exe –∏–ª–∏ pwsh.exe (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–µ—Ä—Å–∏–∏ PowerShell).
–ö–ª–∏–∫–Ω–∏—Ç–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –ø–æ –ø—Ä–æ—Ü–µ—Å—Å—É –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É.</p>
                 <p class="text-gray-300 mt-6 mb-2 font-semibold">4.  –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å PowerShell-—Å–∫—Ä–∏–ø—Ç –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–∞ (-WindowStyle Hidden)</p>
                <p class="text-gray-400 mb-4">–ü–ö–ú –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ ‚Üí –°–æ–∑–¥–∞—Ç—å ‚Üí –Ø—Ä–ª—ã–∫. –í –ø–æ–ª–µ "–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞" –≤—Å—Ç–∞–≤—å—Ç–µ:</p>
                <div class="code-block">
                    <pre><code>powershell.exe -ExecutionPolicy Bypass -File "C:\whisper_hotkey\run.ps1"</code></pre>
                    <button class="copy-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
                
                 <div class="mt-6 p-4 bg-green-500/10 border border-green-500/20 rounded-lg">
                    <p class="text-sm text-green-300">
                        <strong>üéâ –ì–æ—Ç–æ–≤–æ!</strong> –¢–µ–ø–µ—Ä—å –¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ —è—Ä–ª—ã–∫—É –∑–∞–ø—É—Å—Ç–∏—Ç —Å–∫—Ä–∏–ø—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.
                    </p>
                </div>
            </div>
        </section>
    </main>
    <!-- –ö–û–ù–ï–¶: –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->

    <script>
        // --- –õ–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ Python —Å–∫—Ä–∏–ø—Ç–∞ ---
        const defaults = { HOTKEY_KEY: 'f9', SUPPRESS_HOTKEY: true, MAX_RECORD_SEC: 60, WHISPER_MODEL: 'small', USE_GPU: true, LANGUAGE: 'ru', TASK: 'transcribe', INPUT_DEVICE: '', CHUNK_SEC: 0.2, SILENCE_TRIM: true, SILENCE_THRESHOLD: 0.015, SILENCE_MARGIN_SEC: 0.15 };
        const template=`import os,sys,time,threading,queue,numpy as np,sounddevice as sd,keyboard,pyperclip,whisper,torch
try:import torchaudio.functional as AF
except ImportError:AF=None
try:import winsound;HAVE_WINSOUND=True
except ImportError:HAVE_WINSOUND=False
try:import urllib.request
except ImportError:raise RuntimeError("urllib.request is required for downloading models.")

HOTKEY_KEY='__HOTKEY_KEY__';SUPPRESS_HOTKEY=__SUPPRESS_HOTKEY__;MAX_RECORD_SEC=__MAX_RECORD_SEC__;WHISPER_MODEL='__WHISPER_MODEL__';USE_GPU=__USE_GPU__;LANGUAGE=__LANGUAGE__;TASK='__TASK__';INPUT_DEVICE=__INPUT_DEVICE__;CHUNK_SEC=__CHUNK_SEC__;SILENCE_TRIM=__SILENCE_TRIM__;SILENCE_THRESHOLD=__SILENCE_THRESHOLD__;SILENCE_MARGIN_SEC=__SILENCE_MARGIN_SEC__

_MODELS={"tiny":"https://openaipublic.azureedge.net/main/whisper/models/65147644a518d12f04e32d6f3b26facc3f8dd46e5390956a9424a650c0ce22b9/tiny.pt","base":"https://openaipublic.azureedge.net/main/whisper/models/ed3a0b6b1c0edf879ad9b11b1af5a0e6ab5db9205f891f668f8b0e6c6326e34e/base.pt","small":"https://openaipublic.azureedge.net/main/whisper/models/9ecf779972d90ba49c06d968637d720dd632c55bbf19d441fb42bf17a411e794/small.pt","medium":"https://openaipublic.azureedge.net/main/whisper/models/345ae4da62f9b3d59415adc60127b97c714f32e89e936602e85993674d08dcb1/medium.pt","large-v2":"https://openaipublic.azureedge.net/main/whisper/models/81f7c96c852ee8a3a4ac32b870acd623df44a6936de5a16ae1719b0318991443/large-v2.pt", "large-v3":"https://openaipublic.azureedge.net/main/whisper/models/e5b1a55b89c1367d665e5e4c4b5fde2f6c06e4ab8b355b2732128fc51585c54c/large-v3.pt"}

def _download_reporthook(block_num, block_size, total_size):
    if total_size > 0:
        percent = 100.0 * block_num * block_size / total_size
        bar_length = 40
        filled_len = int(round(bar_length * percent / 100.0))
        bar = '‚ñà' * filled_len + '-' * (bar_length - filled_len)
        sys.stdout.write(f'\\r–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏: |{bar}| {percent:.1f}%')
        sys.stdout.flush()

if WHISPER_MODEL in _MODELS:
    url = _MODELS[WHISPER_MODEL]
    download_root = os.path.join(os.path.expanduser("~"), ".cache", "whisper")
    os.makedirs(download_root, exist_ok=True)
    download_target = os.path.join(download_root, os.path.basename(url))
    if not os.path.exists(download_target):
        print(f"–ú–æ–¥–µ–ª—å '{WHISPER_MODEL}' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –ù–∞—á–∏–Ω–∞—é –∑–∞–≥—Ä—É–∑–∫—É...")
        try:
            urllib.request.urlretrieve(url, download_target, reporthook=_download_reporthook)
            sys.stdout.write('\\n')
            print("‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.")
        except Exception as e:
            print(f"\\n‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å: {e}")
            if os.path.exists(download_target): os.remove(download_target)
            sys.exit(1)

device='cuda' if(USE_GPU and torch.cuda.is_available())else'cpu'
if USE_GPU and device!='cuda':print('‚ö†Ô∏è CUDA –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –°–∫—Ä–∏–ø—Ç –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CPU.')

model_container={};_load_task=lambda:model_container.update(model=whisper.load_model(WHISPER_MODEL,device=device));load_thread=threading.Thread(target=_load_task);load_thread.start();chars="‚¢ø‚£ª‚£Ω‚£æ‚£∑‚£Ø‚£ü‚°ø";i=0;msg=f"–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ '{WHISPER_MODEL}' –≤ {device.upper()}..."
while load_thread.is_alive():sys.stdout.write(f'\\r{chars[i%len(chars)]} {msg}');sys.stdout.flush();time.sleep(0.1);i+=1
sys.stdout.write('\\r' + ' '*(len(msg)+5)+'\\r');load_thread.join();model=model_container.get('model')
if model:print("‚úÖ –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.")
else:print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å –≤ –ø–∞–º—è—Ç—å.");sys.exit(1)

_recording=False;_audio_queue=None;_stop_event=None;_record_thr=None;_sr_in=None;_state_lock=threading.Lock()
def beep(kind='start'):
    if not HAVE_WINSOUND:return
    try:tones={'start':(880,120),'stop':(660,120),'ok':(1200,120),'err':(330,220)};f,d=tones.get(kind,(750,80));winsound.Beep(f,d)
    except Exception:pass
def get_input_samplerate(device=None):
    try:info=sd.query_devices(device,'input');sr=int(info['default_samplerate']);return sr if sr>0 else 16000
    except Exception:return 16000
def record_to_queue(q,stop_event,sr,device=None):
    try:
        block_size=max(1,int(sr*CHUNK_SEC))
        with sd.InputStream(samplerate=sr,channels=1,dtype='float32',device=device,blocksize=block_size) as stream:
            start_t=time.time()
            while not stop_event.is_set()and(time.time()-start_t)<MAX_RECORD_SEC:
                data,overflowed=stream.read(block_size)
                if overflowed:print('‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∞ –∞—É–¥–∏–æ–≤–≤–æ–¥–∞!')
                q.put(data.reshape(-1).copy())
    except Exception as e:q.put(('__ERROR__',str(e)))
def trim_silence(wave,sr):
    if wave.size==0 or not SILENCE_TRIM:return wave
    win=max(1,int(0.05*sr));
    if win>=wave.size:return wave
    env=np.convolve(np.abs(wave),np.ones(win)/win,mode='same');mask=env>=SILENCE_THRESHOLD
    if not np.any(mask):return np.array([],dtype=np.float32)
    idx=np.where(mask)[0];start=max(0,idx[0]-int(SILENCE_MARGIN_SEC*sr));end=min(wave.size,idx[-1]+int(SILENCE_MARGIN_SEC*sr));return wave[start:end]
def resample_to_16k(wave,sr):
    target_sr=16000;
    if sr==target_sr:return wave.astype(np.float32,copy=False)
    if AF is not None:tensor=torch.from_numpy(wave).unsqueeze(0);resampled=AF.resample(tensor,sr,target_sr);return resampled.squeeze(0).cpu().numpy().astype(np.float32)
    n_out=int(round(wave.size*(target_sr/float(sr))));
    if n_out<=0:return np.array([],dtype=np.float32)
    x_old=np.linspace(0.0,1.0,num=wave.size);x_new=np.linspace(0.0,1.0,num=n_out);return np.interp(x_new,x_old,wave).astype(np.float32)
def start_recording(_event=None):
    global _recording,_audio_queue,_stop_event,_record_thr,_sr_in
    with _state_lock:
        if _recording:return
        _recording=True;_sr_in=get_input_samplerate(INPUT_DEVICE);_audio_queue=queue.Queue();_stop_event=threading.Event()
        _record_thr=threading.Thread(target=record_to_queue,args=(_audio_queue,_stop_event,_sr_in,INPUT_DEVICE),daemon=True)
        print(f'‚ñ∂Ô∏è –ó–∞–ø–∏—Å—å... (—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: {INPUT_DEVICE or "default"}, {_sr_in} –ì—Ü)');beep('start');_record_thr.start()
def stop_recording(_event=None):
    global _recording
    with _state_lock:
        if not _recording:return
        _stop_event.set()
    if _record_thr and _record_thr.is_alive():_record_thr.join(timeout=1.5)
    beep('stop');chunks=[];err=None
    while not _audio_queue.empty():
        item=_audio_queue.get_nowait()
        if isinstance(item,tuple)and item[0]=='__ERROR__':err=item[1]
        else:chunks.append(item)
    _recording=False
    if err:print(f'‚ùå –ê—É–¥–∏–æ –æ—à–∏–±–∫–∞: {err}');beep('err');return
    if not chunks:print('‚ÑπÔ∏è –ù–∏—á–µ–≥–æ –Ω–µ –∑–∞–ø–∏—Å–∞–Ω–æ.');return
    audio=np.concatenate(chunks,axis=0);audio=trim_silence(audio,_sr_in)
    if audio.size<200:print('‚ÑπÔ∏è –ó–∞–ø–∏—Å—å —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∞—è –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —Ç–∏—à–∏–Ω—ã.');return
    audio16k=resample_to_16k(audio,_sr_in)
    try:
        print('üõ† –†–∞—Å–ø–æ–∑–Ω–∞—ë–º...');result=model.transcribe(audio16k,fp16=(device=='cuda'),language=LANGUAGE,task=TASK);text=(result.get('text')or'').strip()
        if text:print('üî§ –†–µ–∑—É–ª—å—Ç–∞—Ç:',text);pyperclip.copy(text);keyboard.write(text);beep('ok')
        else:print('‚ÑπÔ∏è –†–∞—Å–ø–æ–∑–Ω–∞–Ω –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.')
    except Exception as e:print(f'‚ùå –û—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è: {e}');beep('err')
def main():
    print('--- –ì–æ—Ä—è—á–∞—è –¥–∏–∫—Ç–æ–≤–∫–∞ —Å Whisper ---')
    print(f'\\033[94m–ú–æ–¥–µ–ª—å: {WHISPER_MODEL} | –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: {device.upper()} | –Ø–∑—ã–∫: {LANGUAGE or "auto"} | –ó–∞–¥–∞—á–∞: {TASK}\\033[0m')
    print(f'--- –£–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ "{HOTKEY_KEY.upper()}" –¥–ª—è –∑–∞–ø–∏—Å–∏ ---')
    keyboard.on_press_key(HOTKEY_KEY,start_recording,suppress=SUPPRESS_HOTKEY)
    keyboard.on_release_key(HOTKEY_KEY,stop_recording,suppress=SUPPRESS_HOTKEY)
    try:
        while True:time.sleep(1)
    except KeyboardInterrupt:print('\\n–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã...')
    finally:keyboard.unhook_all()
if __name__=='__main__':main()`;
        
        function pyBool(v){return v?'True':'False'} function pyString(v){return v?`'${v}'`:'None'}
        function pyInputDevice(v){if(!v)return'None';const n=Number(v);return Number.isFinite(n)&&String(n)===v?v:`'${v.replace(/'/g,"\\'")}'`}
        function getCfg(){let c={};for(const k in defaults){const el=document.getElementById(k);if(el)c[k]=el.type==='checkbox'?el.checked:(el.type==='number'?Number(el.value):el.value.trim())}return c}
        function generateCode(){const c=getCfg();let code=template.replace('__HOTKEY_KEY__',c.HOTKEY_KEY.replace(/'/g,"\\'")).replace('__SUPPRESS_HOTKEY__',pyBool(c.SUPPRESS_HOTKEY)).replace('__MAX_RECORD_SEC__',String(c.MAX_RECORD_SEC)).replace('__WHISPER_MODEL__',c.WHISPER_MODEL).replace('__USE_GPU__',pyBool(c.USE_GPU)).replace('__LANGUAGE__',pyString(c.LANGUAGE)).replace("__TASK__",c.TASK).replace('__INPUT_DEVICE__',pyInputDevice(c.INPUT_DEVICE)).replace('__CHUNK_SEC__',String(c.CHUNK_SEC)).replace('__SILENCE_TRIM__',pyBool(c.SILENCE_TRIM)).replace('__SILENCE_THRESHOLD__',String(c.SILENCE_THRESHOLD)).replace('__SILENCE_MARGIN_SEC__',String(c.SILENCE_MARGIN_SEC));document.getElementById('pycode').textContent=code}
        function resetDefaults(){for(const key in defaults){const el=document.getElementById(key);if(el)el.type==='checkbox'?el.checked=defaults[key]:el.value=defaults[key]}generateCode()}
        
        document.addEventListener('DOMContentLoaded',()=>{
            const cfgForm=document.getElementById('cfg');
            if(cfgForm){cfgForm.addEventListener('input',generateCode);cfgForm.addEventListener('change',generateCode);resetDefaults()}
            
            // --- –ò–ó–ú–ï–ù–ï–ù–ò–ï: –õ–æ–≥–∏–∫–∞ –¥–ª—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü ---
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.page-section');

            function showSection(targetId, initialLoad = false) {
                sections.forEach(section => {
                    const isTarget = section.id === targetId;
                    if (isTarget) {
                        section.style.display = 'block';
                        if (!initialLoad) {
                            // –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫–ª–∏–∫–µ, –∞ –Ω–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
                            section.classList.add('fade-in');
                        }
                    } else {
                        section.style.display = 'none';
                        section.classList.remove('fade-in');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.toggle('active', link.dataset.target === targetId);
                });
            }

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.dataset.target;
                    showSection(targetId);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é —Å–µ–∫—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            showSection('setup', true);


            // --- –õ–æ–≥–∏–∫–∞ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ---
            const copyToClipboard = async (text) => {
                try {
                    await navigator.clipboard.writeText(text);
                    return true;
                } catch { 
                    const textarea = document.createElement('textarea');
                    textarea.value = text;
                    textarea.style.position = 'fixed';
                    textarea.style.opacity = '0';
                    document.body.appendChild(textarea);
                    textarea.select();
                    try { document.execCommand('copy'); return true; } 
                    catch { return false; } 
                    finally { document.body.removeChild(textarea); }
                }
            };

            document.addEventListener('click', async (e) => {
                if (e.target.classList.contains('copy-btn')) {
                    const btn = e.target;
                    const code = btn.parentElement.querySelector('code').textContent;
                    if (await copyToClipboard(code)) {
                        const originalText = btn.textContent;
                        btn.textContent = '‚úì –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ';
                        btn.classList.add('copied');
                        setTimeout(() => {
                            btn.textContent = originalText;
                            btn.classList.remove('copied');
                        }, 2000);
                    }
                }
            });
        });
    </script>
</body>
</html>

